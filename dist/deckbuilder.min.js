var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,d){a!=Array.prototype&&a!=Object.prototype&&(a[c]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var c=a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};function fisherYates(a,c){for(;0<c;){var d=a.length;if(0==d)return!1;for(;--d;){var b=Math.floor(Math.random()*(d+1)),f=a[d];a[d]=a[b];a[b]=f}c--}return a}
function strip(a,c){for(var d=utils.random(3,Math.floor(.25*a.length));-1<c;){var b=a.splice(0,d),f=utils.random(0,a.length),g=a.slice(0,f);f=a.slice(f);a=g.concat(b,f);c--}return a}function deepCopy(a){var c;var d=Array.isArray(a)?[]:{};for(c in a){var b=a[c];d[c]="object"===typeof b&&null!==b?deepCopy(b):b}return d}
var Deckbuilder=function(a){a=void 0===a?{}:a;this._options=Object.assign({maxCardCount:Infinity},a);this.deck=[];this.count=0;this.drawn=[];this.discarded=[];this.shuffleTechniques={fisherYates:fisherYates,strip:strip}};
Deckbuilder.prototype.add=function(a,c){c=void 0===c?!1:c;Array.isArray(a)||(a=[a]);for(var d=$jscomp.makeIterator(a),b=d.next();!b.done;b=d.next())if(b=b.value,void 0===b.id||null===b.id)console.warn("Card missing `id` property, skipping...");else{if(this.count===this._options.maxCardCount){console.warn("The maximum amount of cards for this deck has been reached.");return}c?this.deck.splice(Math.floor(Math.random()*this.deck.length),0,b):this.deck.push(b);this.count++}return this};
Deckbuilder.prototype.remove=function(a){Array.isArray(a)||(a=[a]);this.deck=this.deck.filter(function(c){return!a.includes(c.id)});return this};Deckbuilder.prototype.edit=function(a,c){for(var d=$jscomp.makeIterator(this.deck),b=d.next();!b.done;b=d.next())if(b=b.value,b.id===a){b=Object.assign(b,c);for(var f in b)null===b[f]&&delete b[f];break}};Deckbuilder.prototype.shuffle=function(a,c){c=void 0===c?this.shuffleTechniques.fisherYates:c;this.deck=c(this.deck,void 0===a?1:a)};
Deckbuilder.prototype.deal=function(a,c){for(var d=this,b={},f=deepCopy(this.deck),g=a*c,e={i:0},h=0;e.i<g;e={i:e.i},++e.i,++h){h>=a&&(h=0);var k=h+1;b[k]||(b[k]=[]);b[k].push(this.deck[e.i]);this.drawn.push(this.deck[e.i]);f.filter(function(a){return function(b){b.id==d.deck[a.i].id&&f.splice(f.indexOf(b),1)}}(e))}this.deck=f;return b};
Deckbuilder.prototype.draw=function(a){for(var c=this,d=deepCopy(this.deck),b={i:0};b.i<a;b={i:b.i},++b.i)this.drawn.push(this.deck[b.i]),d.filter(function(a){return function(b){b.id==c.deck[a.i].id&&d.splice(d.indexOf(b),1)}}(b));this.deck=d;return[]};Deckbuilder.prototype.pick=function(a){Array.isArray(a)||(a=[a]);return this.deck.filter(function(c){return a.includes(c.id)})};
Deckbuilder.prototype.discard=function(a,c){c=void 0===c?!1:c;Array.isArray(a)||(a=[a]);this.discarded=this.drawn.filter(function(b){return a.includes(b.id)});this.drawn=this.drawn.filter(function(b){return!a.includes(b.id)});if(c){var d=this.deck.filter(function(b){return a.includes(b.id)});this.deck=this.deck.filter(function(b){return!a.includes(b.id)});this.discarded=this.discarded.concat(d)}return this};
Deckbuilder.prototype["return"]=function(a){a=void 0===a?{}:a;if(a.ids){Array.isArray(a.ids)||(a.ids=[a.ids]);for(var c=deepCopy(this.drawn),d=deepCopy(this.discarded),b=0;b<a.ids.length;++b){for(var f=a.ids[b],g=$jscomp.makeIterator(this.drawn),e=g.next();!e.done;e=g.next())e=e.value,e.id===f&&(this.deck.push(e),c.splice(c.indexOf(e),1));g=$jscomp.makeIterator(this.discarded);for(e=g.next();!e.done;e=g.next())e=e.value,e.id===f&&(this.deck.push(e),d.splice(d.indexOf(e),1))}this.drawn=c;this.discarded=
d}a.drawn&&(this.deck=this.deck.concat(this.drawn),this.drawn=[]);a.discarded&&(this.deck=this.deck.concat(this.discarded),this.discarded=[]);return this};